<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draft | ROV SN TOURNAMENT</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" href="RoV Logo.png" type="image/png">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="text-gray-800 relative">

    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-[#E8F7FF] z-[100] flex flex-col items-center justify-center transition-opacity duration-700 ease-out">
        <div class="relative flex flex-col items-center">
            <div class="w-40 h-40 md:w-56 md:h-56 bg-white rounded-full shadow-2xl flex items-center justify-center border-4 border-[#15C8FF] animate-pulse-logo mb-6 overflow-hidden p-2">
                <img src="RoV Logo.png" class="w-full h-full object-cover rounded-full" alt="RoV Logo">
            </div>
            <div class="mt-4 flex space-x-2 animate-bounce">
                <div class="w-3 h-3 bg-[#15C8FF] rounded-full"></div>
                <div class="w-3 h-3 bg-[#15C8FF] rounded-full animation-delay-200"></div>
                <div class="w-3 h-3 bg-[#15C8FF] rounded-full animation-delay-400"></div>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">üèÜ ROV SN TOURNAMENT 2026</h1>
            <p class="text-gray-500">League Phase: Modified Partial Round-Robin (BO3)</p>
        </div>

        <!-- Team Input Section -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-6 border-t-4 border-primary">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold flex items-center">
                    <i class="fas fa-users-cog mr-2 text-primary"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡∏°‡πÅ‡∏Ç‡πà‡∏á (16 ‡∏ó‡∏µ‡∏°)
                </h2>
                <!-- Connection Status -->
                <div id="dbStatus" class="text-xs px-2 py-1 rounded bg-gray-100 text-gray-500 flex items-center">
                    <div class="w-2 h-2 rounded-full bg-gray-400 mr-2"></div> Connecting...
                </div>
            </div>
            <textarea id="teamsInput" rows="6" class="w-full p-3 border border-gray-200 rounded-lg focus-ring-theme transition text-sm bg-gray-50 font-mono" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏° (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏•‡∏∞ 1 ‡∏ó‡∏µ‡∏°)">Team 1
Team 2
Team 3
Team 4
Team 5
Team 6
Team 7
Team 8
Team 9
Team 10
Team 11
Team 12
Team 13
Team 14
Team 15
Team 16</textarea>
            
            <div class="mt-4">
                <button id="generateBtn" onclick="generateSchedule()" class="w-full bg-primary bg-primary-hover text-white font-bold py-3 px-4 rounded-lg transition duration-200 shadow-md flex justify-center items-center text-lg transform hover:scale-[1.01] active:scale-[0.99]">
                    <i class="fas fa-play-circle mr-2"></i> ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (Schedule Reveal)
                </button>
            </div>
            <p id="errorMsg" class="text-red-500 text-sm mt-2 hidden"></p>
        </div>

        <!-- Results Section -->
        <div id="resultsArea" class="hidden space-y-8">
            <!-- Pots Display -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Pot A -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100 animate-fade-in" style="animation-delay: 0.1s;">
                    <div class="bg-gradient-to-r from-cyan-500 to-blue-500 text-white p-3 text-center font-bold relative overflow-hidden">
                        <span class="relative z-10">üîµ POT A</span>
                    </div>
                    <div class="p-4">
                        <ul id="potAList" class="space-y-2 text-sm"></ul>
                    </div>
                </div>

                <!-- Pot B -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100 animate-fade-in" style="animation-delay: 0.2s;">
                    <div class="bg-gradient-to-r from-red-500 to-orange-500 text-white p-3 text-center font-bold relative overflow-hidden">
                        <span class="relative z-10">üî¥ POT B</span>
                    </div>
                    <div class="p-4">
                        <ul id="potBList" class="space-y-2 text-sm"></ul>
                    </div>
                </div>
            </div>

            <!-- Schedule -->
            <div class="bg-white rounded-xl shadow-sm p-6 border-t-4 border-primary animate-fade-in" style="animation-delay: 0.3s;">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold flex items-center">
                        <i class="fas fa-calendar-alt mr-2 text-gray-700"></i> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô
                    </h2>
                    <div class="text-xs font-bold text-primary bg-[var(--secondary)] px-3 py-1 rounded-full border border-primary">
                        Total: 8 Match Days
                    </div>
                </div>

                <!-- View Tabs -->
                <div class="flex border-b border-gray-200 mb-4">
                    <button onclick="switchTab('list')" id="tab-list" class="flex-1 py-2 text-center tab-active hover:bg-gray-50 transition">
                        ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (List)
                    </button>
                    <button onclick="switchTab('day')" id="tab-day" class="flex-1 py-2 text-center tab-inactive hover:bg-gray-50 transition">
                        ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô (By Day)
                    </button>
                </div>

                <!-- List View -->
                <div id="view-list" class="overflow-x-auto">
                    <table class="w-full text-sm text-left border-collapse">
                        <thead class="bg-[var(--secondary)] text-gray-700 uppercase font-semibold">
                            <tr>
                                <th class="px-4 py-3 rounded-l-lg text-primary">Day</th>
                                <th class="px-4 py-3">Phase</th>
                                <th class="px-4 py-3 text-right">Blue Side</th>
                                <th class="px-4 py-3 text-center">VS</th>
                                <th class="px-4 py-3 text-left">Red Side</th>
                                <th class="px-4 py-3 rounded-r-lg">Format</th>
                            </tr>
                        </thead>
                        <tbody id="scheduleTableBody" class="divide-y divide-gray-100"></tbody>
                    </table>
                </div>

                <!-- Day View -->
                <div id="view-day" class="hidden space-y-4"></div>
            </div>
        </div>
    </div>

    <!-- Match Reveal Modal -->
    <div id="revealModal" class="fixed inset-0 bg-gray-900 bg-opacity-95 flex items-center justify-center z-50 hidden backdrop-blur-md transition-opacity duration-300">
        <div class="w-full max-w-3xl mx-4 relative">
            
            <!-- Skip Button -->
            <button onclick="skipAnimation()" class="absolute -top-12 right-0 text-white text-sm hover:text-primary transition flex items-center bg-gray-800 px-3 py-1 rounded-full border border-gray-700 z-50">
                <i class="fas fa-forward mr-2"></i> ‡∏Ç‡πâ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Skip)
            </button>

            <!-- Reveal Card -->
            <div class="reveal-card bg-white rounded-3xl shadow-2xl overflow-hidden text-center relative p-8 border-4 border-primary/20">
                
                <!-- Match Day Header -->
                <div class="mb-8">
                    <span id="revealDayBadge" class="bg-primary text-white px-4 py-1 rounded-full text-sm font-bold uppercase tracking-widest shadow-lg animate-slide-up">
                        Match Day 1
                    </span>
                    <h2 id="revealPhase" class="text-gray-400 text-sm mt-3 uppercase tracking-wider font-semibold animate-slide-up" style="animation-delay: 0.1s;">
                        Internal Phase
                    </h2>
                </div>

                <!-- Matchup -->
                <div class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-10 my-8">
                    
                    <!-- Team Blue -->
                    <div class="flex-1 w-full animate-scale-up" style="animation-delay: 0.2s;">
                        <div class="bg-blue-50 border-2 border-blue-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition transform hover:-translate-y-1">
                            <div class="text-blue-500 text-xs font-bold uppercase mb-2">Blue Side</div>
                            <div id="revealTeamA" class="team-name-lg text-blue-700 break-words leading-tight">Team A</div>
                        </div>
                    </div>

                    <!-- VS Badge -->
                    <div class="animate-pop-in" style="animation-delay: 0.4s;">
                        <div class="vs-badge-lg rounded-full bg-gradient-to-br from-gray-800 to-gray-900 text-white flex items-center justify-center font-black border-4 border-white z-10 relative">
                            VS
                        </div>
                    </div>

                    <!-- Team Red -->
                    <div class="flex-1 w-full animate-scale-up" style="animation-delay: 0.3s;">
                        <div class="bg-red-50 border-2 border-red-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition transform hover:-translate-y-1">
                            <div class="text-red-500 text-xs font-bold uppercase mb-2">Red Side</div>
                            <div id="revealTeamB" class="team-name-lg text-red-700 break-words leading-tight">Team B</div>
                        </div>
                    </div>

                </div>

                <!-- Footer / Progress -->
                <div class="mt-8">
                    <div class="text-gray-400 text-xs mb-2 flex justify-between">
                        <span id="matchCounter">Match 1 of 8 (Day 1)</span>
                        <span class="animate-pulse text-primary">Live Revealing...</span>
                    </div>
                    <div class="w-full bg-gray-100 rounded-full h-2 overflow-hidden">
                        <div id="revealProgressBar" class="bg-primary h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Status Modal -->
    <div id="statusModal" class="fixed inset-0 bg-gray-900/70 hidden items-center justify-center z-[120] px-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative animate-fade-in modal-card">
            <button id="statusModalClose" class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 transition" aria-label="Close">
                <i class="fas fa-times text-lg"></i>
            </button>
            <div class="status-badge inline-flex items-center space-x-2 px-3 py-2 rounded-full text-sm font-semibold bg-blue-100 text-blue-700">
                <i id="statusModalIcon" class="fas fa-circle-info"></i>
                <span id="statusModalTitle">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</span>
            </div>
            <p id="statusModalMessage" class="mt-4 text-gray-700 leading-relaxed"></p>
        </div>
    </div>

    <!-- Firebase Config Inline to avoid 404 on GitHub Pages -->
    <script>
        // Inline Firebase configuration (was firebase-config.js)
        var __firebase_config = JSON.stringify({
            apiKey: "AIzaSyBp022DX3ejcBUbIgmMAgXh1iOQZ5FcK5Y",
            authDomain: "rov-draft-f3f8c.firebaseapp.com",
            projectId: "rov-draft-f3f8c",
            storageBucket: "rov-draft-f3f8c.firebasestorage.app",
            messagingSenderId: "683405091548",
            appId: "1:683405091548:web:435ce7aa6f0552509e8a19",
            measurementId: "G-7ED6JWF1JH"
        });

        // App identifier used in Firestore path
        var __app_id = "rov-sn-tournament-2026";

        // Optional custom auth token (leave null to use anonymous auth)
        var __initial_auth_token = null;
    </script>

    <!-- App Script -->
    <script type="module" src="script.js"></script>

</body>
</html>